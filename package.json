{
	"name": "aiki",
	"private": true,
	"type": "module",
	"workspaces": [
		"types",
		"lib",
		"sdk/workflow",
		"sdk/task",
		"sdk/client",
		"sdk/worker",
		"server",
		"web"
	],
	"scripts": {
		"check": "tsc --noEmit",
		"lint": "bunx @biomejs/biome check .",
		"lint:fix": "bunx @biomejs/biome check --write .",
		"test": "bun test",
		"test:watch": "bun test --watch",
		"test:coverage": "bun test --coverage",
		"db:generate": "bun run --cwd server db:generate",
		"db:generate:custom": "bun run --cwd server db:generate:custom",
		"db:migrate": "bun run --cwd server db:migrate",
		"db:push": "bun run --cwd server db:push",
		"server": "bun run server/index.ts",
		"server:watch": "bun --watch run server/index.ts",
		"web": "bun run --cwd web dev",
		"changeset": "changeset",
		"bump": "changeset version && rm bun.lock && bun install && bun run lint:fix",
		"clean": "rm -rf types/dist lib/dist server/dist sdk/*/dist",
		"build:types": "bun run --cwd types build",
		"build:lib": "bun run --cwd lib build",
		"build:sdk": "bun run --cwd sdk/workflow build && bun run --cwd sdk/task build && bun run --cwd sdk/client build && bun run --cwd sdk/worker build",
		"build:server": "bun build server/index.ts --compile --outfile server/dist/aiki-server",
		"docker:build": "docker compose build",
		"docker:up": "docker compose up -d",
		"docker:down": "docker compose down",
		"docker:logs": "docker compose logs -f",
		"release": "bun run build:types && bun run build:lib && bun run build:sdk && bun run release:publish && git tag v$(bun -e \"console.log(require('./types/package.json').version)\") && git push && git push --tags",
		"release:publish": "for pkg in types sdk/workflow sdk/task sdk/client sdk/worker; do (cd $pkg && bun publish --access public) || true; done",
		"prepare": "husky"
	},
	"lint-staged": {
		"*.{ts,tsx,js,jsx,json}": [
			"bunx @biomejs/biome check --write"
		]
	},
	"devDependencies": {
		"@biomejs/biome": "^2.3.10",
		"@changesets/cli": "^2.27.1",
		"@types/node": "^22.10.2",
		"bun-types": "^1.1.38",
		"husky": "^9.1.7",
		"lint-staged": "^16.2.7",
		"tsup": "^8.5.1",
		"typescript": "^5.7.2"
	}
}
